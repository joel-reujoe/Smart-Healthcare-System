<html>
    <head>
        <title>HomePage</title>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
            <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Compiled and minified JavaScript -->
            
    
            <link href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.0.0/cropper.min.css" rel="stylesheet"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.0.0/cropper.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    </head>
    <body>
            <nav>
                    <div class="nav-wrapper pink lighten-2">
                            <a href="#" class="brand-logo center">AdminCall</a>
                    </div>
                </nav>

        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col s12 grey lighten-2 z-depth-4">
                        <h5>Requests Notification</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 grey lighten-3">
                        <table>
                            <thead>
                                    <tr>
                                        <th>
                                            Request by
                                        </th>
                                        <th>
                                            Request Time
                                        </th>
                                        <th>
                                            Description
                                        </th>
                                        <th>
                                            Details
                                        </th>
                                        <th>
                                            Approve/Disapprove
                                        </th>
                                    </tr>
                            </thead>
                            <tbody id="tblNotification">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

<script src="https://www.gstatic.com/firebasejs/5.5.0/firebase.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="../../js/functions/lib/general.js"></script>
<script>

var params=new URLSearchParams()
params.append("action","getNotification")
axios({
            method:'get',
            url:`${globalpath}controllers/ctrl-admin/`,
            params:params
}).then(function(response){
    if(response.data.status=="true"){
        console.log(response.data.data)
        for(var i=0;i<response.data.data.length/2;i++){
            var tr=document.createElement("tr");
            tr.innerHTML=`<td>${response.data.data[i].name}</td>
                <td>${response.data.data[i].time} ${response.data.data[i].date}</td>
                <td>${response.data.data[i].notification_description}</td>
                <td><a href="!#"><i class="material-icon icons-green">add</i></a></td>
                <td>
                <div class="container">
                    <div class="row">
                        <div class="col s6">
                                <button data-requestid=${response.data.data[i].request_id} class="btn teal white-text approve">approve</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6">
                                <button data-requestid=${response.data.data[i].request_id} class="btn white-text red disapprove">dispprove</button>
                        </div>
                    </div>
                </div>
                </td>`
            document.getElementById("tblNotification").appendChild(tr)
            }
    }
}).catch(function(error){
    console.log(error)
})

</script>